(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],[,,,,,,,function(e,t,n){e.exports=n(15)},,,,,function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),s=n(2),a=n.n(s),l=(n(12),n(3)),i=n(4),c=n(6),u=n(5),p=(n(13),n(14),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).handleFileRead=function(e){var t=r.state.fileReader.result,n=r.readFile(t),o=document.createElement("a"),s=new Blob([r.state.excelOutput],{type:"text/plain"});o.href=URL.createObjectURL(s),o.download="myFile.csv",document.body.appendChild(o),o.click(),r.setState({JSONoutput:n})},r.handleFileChosen=function(e){r.state.fileReader=new FileReader,r.state.fileReader.onloadend=r.handleFileRead,r.state.fileReader.readAsText(e)},r.getNumSpaces=function(e){for(var t=0,n=0;n<e.length;n++){if("-"!=e.substring(n,n+1))return 16*t+"px";t+=1}return 16*t+"px"},r.removeLeading=function(e){for(var t=0,n=0;n<e.length;n++){if("-"!=e.substring(n,n+1))return e.substring(t);t+=1}return e.substring(t)},r.state={JSONoutput:[],fileReader:"",data:"",excelOutput:""},r}return Object(i.a)(n,[{key:"generateNine",value:function(){for(var e="",t=0;t<9;t++){e+=Math.floor(10*Math.random())}return e}},{key:"generateRandomUUID",value:function(e){for(var t=this.generateNine();!e.includes(t);){return this.generateNine()}}},{key:"processCluster",value:function(e,t,n,r,o,s,a,l){for(var i=[],c=Object.keys(s),u=[],p={},d=0;d<c.length;d++)u.push(parseInt(c[d])),p[s[c[d]]]=parseInt(c[d]);for(var h=1;h<e.length;h++)for(var f=e[h],g=0;g<f.length;g++)""==f[g].trim()||u.includes(g)||i.includes(g)||i.push(g);for(var v={},m=e[0],I=0;I<m.length;I++)""==m[I]||i.includes(I)||u.includes(I)||(v[t[I]]=m[I]);v.hasOwnProperty("conceptId")&&""!=v.conceptId||(n.hasOwnProperty(m[r])?(v.conceptId=n[m[r]],o.includes(v.conceptId)||o.push(v.conceptId)):(v.conceptId=this.generateRandomUUID(o),o.push(v.conceptId),n[m[r]]=v.conceptId)),m[p.thisRowId]=v.conceptId;for(var O=Object.keys(p),b=0;b<O.length;b++)if(-1!=O[b].indexOf("Source")){var y=m[p[O[b]]],x=m[p[O[b]]+1];""==y&&n.hasOwnProperty(x)&&(y=n[x]);for(var w=-1,R=0;R<a.length;R++){var j=a[R];""!=y&&j.conceptId==y?(w=b,j.subcollections.includes(v.conceptId+".json")||j.subcollections.push(v.conceptId+".json"),R=a.length):""==y&&x==j["Variable Name"]&&(w=b,y=j.conceptId,j.subcollections.includes(v.conceptId+".json")||j.subcollections.push(v.conceptId+".json"),R=a.length)}if(-1==w){var k={};""==y&&(y=this.generateRandomUUID(o)),k.conceptId=y,k["Variable Name"]=x,k.subcollections=[v.conceptId+".json"],a.push(k)}n[x]=y,o.includes(y)||o.push(y),v[t[p[O[b]]+1]]=y+".json",m[p[O[b]]]=y}for(var N=[],S=[],C=[],U=-1,E={},F=0;F<e.length;F++){for(var J={},M="",P=e[F],V=0;V<i.length;V++){var A=i[V],D=P[A];if(void 0==D)console.log("undefined: "+P),console.log(i),console.log(P.length);else if(-1!=D.indexOf("=")){M=D,U=A,C.push(D);var L=M.split("=")[1].trim(),T=M.split("=")[0].trim(),B=this.generateRandomUUID(o);n.hasOwnProperty(L)&&(B=n[L]),""!=P[U-1]&&(B=P[U-1]),l.push({conceptId:B,variableName:L}),n[L]=B,o.includes(B)||o.push(B),E[B+".json"]=T,P[U-1]=B}else""!=P[A]&&(J[t[A]]=P[A])}if(p.hasOwnProperty("leftMostId")&&""!=P[p.leftMostId]&&(J.conceptId=P[p.leftMostId]),0!=Object.keys(J).length){for(var W=this.generateRandomUUID(o),z=Object.keys(J),$=0;$<z.length;$++){var q=z[$];n.hasOwnProperty(J[q])&&(W=n[J[q]])}J.hasOwnProperty("conceptId")&&(W=J.conceptId),o.includes(W)||o.push(W),J.conceptId=W,S.push(W+".json");for(var G=0;G<z.length;G++){n[J[z[G]]]=W}N.push(J),e[F][p.leftMostId]=W}}if(0==N.length&&C.length>0)v[t[U]]=E;else{v.subcollection=S;for(var H=0;H<N.length;H++){var K=N[H];K[t[U]]=E,l.push(K)}}return""==e[0][p.thisRowId]?(v.conceptId=this.generateRandomUUID(o),n.hasOwnProperty(v[t[r]])&&(v.conceptId=n[v[t[r]]]),e[0][p.thisRowId]=v.conceptId,n[v[t[r]]]=v.conceptId):(v.conceptId=e[0][p.thisRowId],n[v[t[r]]]=v.conceptId),l.push(v),e}},{key:"CSVToArray",value:function(e){for(var t=[];-1!=e.indexOf(",");){var n="";'"'==e.substring(0,1)?(n=(e=e.substring(1)).substring(0,e.indexOf('"')),e=(e=e.substring(e.indexOf('"')+1)).substring(e.indexOf(",")+1)):(n=e.substring(0,e.indexOf(",")),e=e.substring(e.indexOf(",")+1)),t.push(n)}return t.push(e),t}},{key:"lookForConcepts",value:function(e,t,n,r){for(var o=-1,s=[],a=1;a<e.length;a++)for(var l=e[a],i=0;i<l.length;i++)""!=l[i]&&(s.includes(i)||s.push(i),-1!=l[i].indexOf("=")&&(n.includes(i)||n.push(i),o=i));for(var c=0;c<s.length;c++)s[c]!=o&&s[c]<r[0]&&"conceptId"!=t[s[c]]&&(r[0]=s[c],r[1]=t[s[c]])}},{key:"getConceptIds",value:function(e){for(var t=0,n=[],r=!0,o=!1,s=[],a=[],l=[],i=[],c=[],u=-1,p=-1,d=e.split("\n"),h=0;h<d.length;h++){var f=d[h],g=this.CSVToArray(f,",");if(r){s=g,r=!1;for(var v=0;v<g.length;v++)"Variable Name"==g[v]&&(t=v),-1!=g[v].indexOf("Source")?a.push(v):-1!=g[v].indexOf("conceptId")?(i.push(v),l.push(g[v])):-1==p&&""!=g[v]&&(a.push(v),p=v);u=g.length,c.push(g.length),c.push("")}else o?""==g[t]?n.push(g):this.lookForConcepts(n,s,a,c):(n.push(g),o=!0)}this.lookForConcepts(n,s,a,c),a.includes(c[0])||c[0]==u||a.push(c[0]);for(var m=[],I=0;I<a.length;I++){for(var O=!1,b=0;b<i.length;b++)a[I]==i[b]+1&&(O=!0);0==O&&m.push(a[I])}m.sort((function(e,t){return t-e}));var y="";r=!0;var x={};d=e.split("\n");for(var w=0;w<d.length;w++){var R=d[w].split(",");if(1==r){for(var j=R[p],k=0;k<m.length;k++)R.splice(m[k],0,"conceptId");y+=R.map((function(e){return-1!=e.indexOf(",")?'"'+e+'"':e})).join(","),r=!1;for(var N=0;N<R.length;N++)R[N].includes("conceptId")&&N!=R.length-1&&(R[N+1]==j?x[N]="thisRowId":R[N+1]==c[1]?x[N]="leftMostId":x[N]=R[N+1])}else{for(var S=0;S<m.length;S++)R.splice(m[S],0,"");y+="\n",y+=R.map((function(e){return-1!=e.indexOf(",")?'"'+e+'"':e})).join(",")}}return this.state.data=y,x}},{key:"readFile",value:function(e){for(var t=[],n=[],r=JSON.parse("[]"),o=0,s=[],a=this.getConceptIds(e),l=[],i=!0,c=!1,u=[],p=JSON.parse("{}"),d=this.state.data.split("\n"),h=0;h<d.length;h++){var f=d[h],g=this.CSVToArray(f,",");if(i){u=g,i=!1;for(var v=0;v<g.length;v++)"Variable Name"==g[v]&&(o=v);l.push([g])}else if(c)if(""==g[o])s.push(g);else{var m=this.processCluster(s,u,p,o,r,a,n,t);l.push(m),s=[g],c=!0}else s.push(g),c=!0}var I=this.processCluster(s,u,p,o,r,a,n,t);l.push(I);for(var O=0;O<n.length;O++)t.push(n[O]);for(var b="",y=0;y<l.length;y++)for(var x=l[y],w=0;w<x.length;w++){x[w];b+=x[w].map((function(e){return-1!=e.indexOf(",")?'"'+e+'"':e})).join(","),y==l.length-1&&w==x.length-1||(b+="\n")}this.setState({excelOutput:b});for(var R=0;R<t.length;R++)JSON.stringify(t[R],null,"    ")+"\n";return t}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App",style:{"text-align":"left"}},o.a.createElement("header",{className:"App-header",style:{"font-size":"16px","padding-top":"50px","padding-bottom":"50px"}},o.a.createElement("input",{type:"file",id:"file",className:"input-file",accept:".csv",onChange:function(t){return e.handleFileChosen(t.target.files[0])}}),o.a.createElement("div",null),o.a.createElement("div",null,this.state.JSONoutput.map((function(t){return o.a.createElement("p",null,JSON.stringify(t,null,"-").split("\n").map((function(t){return o.a.createElement("span",{style:{"padding-left":e.getNumSpaces(t)}},e.removeLeading(t),o.a.createElement("br",null))})))})))))}}]),n}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[7,1,2]]]);
//# sourceMappingURL=main.76b980ba.chunk.js.map